% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/processing.R
\name{extract_note_info}
\alias{extract_note_info}
\title{Apply protocol events from note files to room data}
\usage{
extract_note_info(notes_path, df_room1, df_room2, keywords_dict = NULL)
}
\arguments{
\item{notes_path}{character
Path to the note file containing protocol events.}

\item{df_room1}{data.frame
Data frame for room 1 containing at least a "datetime" column.}

\item{df_room2}{data.frame
Data frame for room 2 containing at least a "datetime" column.}

\item{keywords_dict}{List,
A dictionary of keywords used to extract protocol events from a note file. Each entry should be a named list with:
\describe{
\item{keywords}{A character vector of keywords or phrases to match in the note comment. Matching is case-insensitive.}
\item{value}{Numeric protocol value to assign when the keyword is detected.}
\item{type}{Optional character, either "instant" or omitted. "instant" events are applied at the specified timestamp and revert to the previous protocol immediately after. Non-instant events set the protocol until another event occurs.}
}
Behavior rules:
\describe{
\item{Non-instant events}{Set the protocol value from their timestamp until another event overwrites it or until a stop keyword sets it to 0.}
\item{Instant events}{Apply only at the timestamp of the note line, then revert to the protocol that was active immediately before.}
\item{Stop keywords}{Always set the protocol to 0, regardless of previous state, unless overridden by an instant event.}
}
If \code{NULL}, a default set of keywords is used.}
}
\value{
A list with two elements:
\describe{
\item{df_room1}{Data frame for room 1 with updated protocol column.}
\item{df_room2}{Data frame for room 2 with updated protocol column.}
}
}
\description{
Reads a note file, extracts protocol events for each participant, applies any detected time drift,
and updates the protocol column in the provided room data frames.
}
\examples{
df1 <- data.frame(datetime = as.POSIXct(c("2023-11-13 22:40:00", "2023-11-13 22:50:00")))
df2 <- data.frame(datetime = as.POSIXct(c("2023-11-13 22:40:00", "2023-11-13 22:50:00")))
note_file <- system.file("extdata", "note.txt", package = "wrictools")
res <- extract_note_info(note_file, df1, df2)
res$df_room1
res$df_room2
}
